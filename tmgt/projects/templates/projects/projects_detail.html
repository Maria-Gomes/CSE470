{% extends "projects/base.html" %}
{% load crispy_forms_tags %}
<!--{% load static %}-->

<head>
    {% block head %}
<!--    <link rel="stylesheet" type="text/css" href="{% static 'projects/css/style.css' %}">-->
        <title>Project Details</title>
    {% endblock head %}
</head>
<body>

    {% block content %}

<div class="content-section float-left ml-3 mb-3 w-50">
        <h2>{{ object.title }}</h2>
        <p>By: {{ object.author }} on {{ object.date_posted|date:"F d, Y" }}</p>
        <p>About This Project: {{ object.about }}</p>
        <a class="btn btn-outline-secondary" href="{% url 'projects-update' object.id %}">Update</a>
        <a class="btn btn-outline-danger" href="{% url 'projects-delete' object.id%}">Delete</a>
</div>
    <form class="float-right mr-3 w-25" method="POST" action="{% url 'tasks-create' object.id %}">
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom-mb-4">Add Task</legend>
                    {{ t_form|crispy }}
                </fieldset>
                <div class="form-group">
                    <input type="submit" value="Submit" class="btn btn-outline-success">
                </div>
            </form>

    <div class="float-left">
    <h2 class="ml-3 mb-2">Tasks</h2>
    <table class="table table-striped table-bordered table-hover ml-3 mb-2">
        <thead class="thead-dark">
        <tr>
            <th>Description</th>
            <th>Deadline</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        </thead>
        {% for task in tasks %}
        <tr>
            <td><a class="article-title">{{ task.desc }}</a></td>
            <td>{{ task.deadline }}</td>
            <td>{{ task.status }}</td>
            <td>
                <a class="btn btn-sm btn-outline-secondary" href="{% url 'tasks-update' task.pk %}">Edit</a>
                <a class="btn btn-sm btn-outline-danger" href="{% url 'tasks-delete' task.pk %}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
<div>
        <form class="float-right mr-3 w-25" method="POST" action="{% url 'comment-create' object.id %}">
                {% csrf_token %}
                <fieldset class="form-group">
                    <legend class="border-bottom-mb-4">Write a Comment</legend>
                    {{ c_form|crispy }}
                </fieldset>
                <div class="form-group">
                    <input type="submit" value="Submit" class="btn btn-outline-success">
                </div>
            </form>
</div>
            <div class="main-comment-section ml-3 mb-2 float-left">
                <h3>Comments</h3>
            {% for comment in comments %}
                <br/>
                <strong> {{ comment.user_from}} : </strong> {{ comment.body }}

            {% endfor %}
            </div>


    {% endblock content %}
</body>